name: Daily Standup

on:
  schedule:
    # Runs every weekday (Monday to Friday) at 9 AM UTC
    - cron: '0 6 * * 1-5'
  workflow_dispatch: # Allows manual triggering

jobs:
  send-standup-prompt:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Install GitHub CLI
        run: |
          sudo apt-get update
          sudo apt-get install gh -y

      - name: Authenticate GitHub CLI
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          echo $GITHUB_TOKEN | gh auth login --with-token

      - name: Create Standup Issue
        run: |
          gh issue create --title "Daily Standup - $(date +'%Y-%m-%d')" --body "## Daily Standup - $(date +'%Y-%m-%d')\n\nPlease provide the following details:\n\n1. **Yesterday Tasks:**\n2. **Today Tasks:**\n3. **Impediments:**\n\n@here" --label "Your Daily Standup"
